这一节到底是在讲啥？
由wire构成gate
由gate组成half-adder
由half-adder和gate组成full-adder
由full-adder构成累加器

先看make-wire的结构:
  构造函数:
    signal-value 信号值
    action-proc 事件队列
  方法:
    (get-signal): 返回当前的signal-value
    (set-signal new-value): 为signal-value赋值new-value,并调用当前事件队列
    (add-action action): 添加新事件至队列首部，并调用新事件

在接下来的gate的定义中可以看到action的具体形式，事件队列里每一个action都被定义为无参函数,
如inverter的invert-input事件:
```scheme
(define (invert-input)
  (let ((new-value (logical-not (get-signal input))))
    (after-delay inverter-delay (lambda () (set-signal output new-value)))
  )
)
```

```js
function Wire(signal, actions) {
  this.signal = signal
  this.actions = actions
}

Wire.prototype.getSignal = function() {
  return this.signal
}

Wire.prototype.setSignal = function() {

}

Wire.prototype.addAction = function(action) {
  if(typeof action === 'function') {
    action = {
      name: action.construtor,
      proc: action
    }
  }

  if(typeof action !== 'object' || !action.name || !action.proc) {
    throw new Error()
  }

  actions[action.name] = action.proc
  action.proc()
}
```

gate的定义方式为:
1) 区分输入输出
2) 通过action为输出端设置新值(after-delay gate-delay lambda () (set! output new-value)).
3) 为输入端配置触发action, 当输入端值发生改变时重新为输出端赋值(event-driven！)

那么action本身是怎么定义的?
action中所调用的after-delay,与js中的setTimeout函数非常类似

原文中关于agenda的描述为: The agenda itself is a one-dimensional table of time segments.
回忆一下所谓的one-dimensional table的结构:

```scheme
(cons '*table (list (cons 'a 1) (cons 'b 2) (cons 'c 3)))
```
所以agenda大概应该长这样:
(cons time (list segment1 segment2 ...))

所以在3-3-4-2.scm中,关于segment的方法的定义也很直接:
(define (segments agenda) (cdr agenda))
(define (set-segments! agenda segments) (set-cdr! agenda segments))
(define (first-segment agenda) (car (segments agenda)))

至于segment的定义，原文是:
The agenda is made up of time segments.
Each time segment is a pair consisting of a number (the time) and a queue
that holds the procedures that are scheduled to be run during that time segment.

这么做的原因是,同一时间点(time)可能会绑定上不

所以segment长这样:
(cons time (cons first rear)) ;first与rear均为list的指针

定义
(define (make-time-segment time queue) (cons time queue))
(define (segment-time s) (car s))
(define (segment-queue s) (cdr s))

```js
function Inverter(in, out) {
  let action = () => {
    inverterDelay
  }
  in.addAction()

}

function AddGate(in1, in2, out) {

}
```

half
